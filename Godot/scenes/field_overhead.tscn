[gd_scene load_steps=36 format=2]

[ext_resource path="res://scripts/field_overhead.gd" type="Script" id=1]
[ext_resource path="res://assets/views/overhead-view3.png" type="Texture" id=2]
[ext_resource path="res://scripts/anim_tree.gd" type="Script" id=3]
[ext_resource path="res://assets/sound/hit.wav" type="AudioStream" id=4]
[ext_resource path="res://assets/raw/baseball.png" type="Texture" id=5]
[ext_resource path="res://scenes/actors/fielder.tscn" type="PackedScene" id=6]
[ext_resource path="res://assets/raw/gui/TimGouw-Baseball.jpg" type="Texture" id=7]
[ext_resource path="res://scripts/ball.gd" type="Script" id=8]
[ext_resource path="res://assets/raw/ball_shadow.png" type="Texture" id=9]
[ext_resource path="res://assets/raw/stadiums/homeplate.png" type="Texture" id=10]
[ext_resource path="res://scenes/triggers/base.tscn" type="PackedScene" id=11]
[ext_resource path="res://assets/raw/batter/runner.png" type="Texture" id=12]
[ext_resource path="res://scenes/ui/ui_overhead.tscn" type="PackedScene" id=13]
[ext_resource path="res://scenes/effects/trail.tscn" type="PackedScene" id=14]

[sub_resource type="CanvasItemMaterial" id=1]
blend_mode = 1

[sub_resource type="PhysicsMaterial" id=2]
friction = 2.0
bounce = 0.005

[sub_resource type="PhysicsMaterial" id=3]

[sub_resource type="CircleShape2D" id=4]
radius = 4.15484

[sub_resource type="Animation" id=5]
length = 3.0
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.5, 3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ -45.0, 90.0, 270.0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("ball_sprite:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.5, 1, 3 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.03, 0.03 ), Vector2( 0.03, 0.03 ), Vector2( 0.01, 0.01 ), Vector2( 0.01, 0.01 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("ball_shadow:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.5, 1, 3 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.07, 0.07 ), Vector2( 0.01, 0.01 ), Vector2( 0.01, 0.01 ) ]
}

[sub_resource type="Animation" id=6]
length = 3.0
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.5, 3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ -45.0, 90.0, 270.0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("ball_sprite:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1.5, 3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.077, 0.077 ), Vector2( 0.01, 0.01 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("ball_shadow:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 1.5, 3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.5, 0.5 ), Vector2( 0.01, 0.01 ) ]
}

[sub_resource type="Animation" id=7]
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ -63.1945, -63.1945 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("ball_sprite:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.01, 0.01 ) ]
}

[sub_resource type="Animation" id=8]
length = 7.0
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 3.5, 7 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ -45.0, 90.0, 270.0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("ball_sprite:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 3.5, 7 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.0765674, 0.0765674 ), Vector2( 0.01, 0.01 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("ball_shadow:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 3.5, 7 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.5, 0.5 ), Vector2( 0.01, 0.01 ) ]
}

[sub_resource type="Animation" id=9]
length = 2.0
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.5, 1.5, 2 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ 0.0, -307.239, -130.346, -34.4153 ]
}

[sub_resource type="AnimationNodeAnimation" id=10]
animation = "grounder"

[sub_resource type="AnimationNodeAnimation" id=11]
animation = "hit"

[sub_resource type="AnimationNodeAnimation" id=12]
animation = "idle"

[sub_resource type="AnimationNodeAnimation" id=13]
animation = "pop_up"

[sub_resource type="AnimationNodeAnimation" id=14]
animation = "roll"

[sub_resource type="AnimationNodeStateMachineTransition" id=15]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=16]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=17]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=18]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachine" id=19]
states/grounder/node = SubResource( 10 )
states/grounder/position = Vector2( 156, 72 )
states/hit/node = SubResource( 11 )
states/hit/position = Vector2( 186, 188 )
states/idle/node = SubResource( 12 )
states/idle/position = Vector2( 634, 188 )
states/pop_up/node = SubResource( 13 )
states/pop_up/position = Vector2( 186, -31 )
states/roll/node = SubResource( 14 )
states/roll/position = Vector2( 408, 72 )
transitions = [ "hit", "roll", SubResource( 15 ), "roll", "idle", SubResource( 16 ), "grounder", "roll", SubResource( 17 ), "pop_up", "roll", SubResource( 18 ) ]
graph_offset = Vector2( -153, -134 )

[sub_resource type="AnimationNodeStateMachinePlayback" id=20]

[sub_resource type="Curve2D" id=21]
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, 551.347, 310.612, -61.8011, 167.315, 61.8011, -167.315, 1306.4, -374.12, 137.168, -12.0588, -137.168, 12.0588, 495.828, -1095.86, 42.2057, -161.286, -42.2057, 161.286, -255.527, -411.133, 0, 0, 0, 0, 538.393, 318.015 )
}

[node name="OverheadView" type="Node2D"]
script = ExtResource( 1 )

[node name="uiCamera" type="Camera2D" parent="."]
position = Vector2( 679.607, -922.24 )
zoom = Vector2( 2, 2 )

[node name="scene_bg" type="Sprite" parent="."]
material = SubResource( 1 )
position = Vector2( 767.353, 990.025 )
rotation = -2.01758
scale = Vector2( 1.57179, 1.57179 )
texture = ExtResource( 7 )
__meta__ = {
"_edit_lock_": true
}

[node name="filter" type="ColorRect" parent="scene_bg"]
margin_left = -697.93
margin_top = -1195.68
margin_right = -657.93
margin_bottom = -1155.68
rect_scale = Vector2( 54.9044, 54.9044 )
color = Color( 0, 0, 0, 0.709804 )
__meta__ = {
"_edit_lock_": true,
"_edit_use_anchors_": false
}

[node name="field_bg" type="Sprite" parent="."]
position = Vector2( 443.029, -842.642 )
scale = Vector2( 1.44397, 1.49537 )
texture = ExtResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 4 )
autoplay = true

[node name="field" type="Node" parent="."]

[node name="field_obstacles" type="StaticBody2D" parent="field"]
visible = false
physics_material_override = SubResource( 2 )

[node name="outfield_fence" type="CollisionPolygon2D" parent="field/field_obstacles"]
position = Vector2( -383.876, -284.596 )
rotation = 0.409826
scale = Vector2( 1, 2.5 )
polygon = PoolVector2Array( -1143.23, -203.223, -1151.76, -335.191, -1095.71, -463.553, -960.909, -590.771, -642.855, -763.357, -217.453, -889.851, 292.091, -973.002, 755.625, -1002.33, 1101.18, -988.236, 1528.68, -945.247, 1908.19, -844.044, 2134.4, -766.079, 2044.8, -758.597, 1866.38, -811.169, 1521.5, -902.212, 1094.63, -960.138, 771.496, -965.994, 306.243, -944.458, -189.987, -867.664, -586.226, -735.007, -901.439, -570.146, -1015.41, -458.095, -1067.34, -335.033, -1062.62, -215.882 )
disabled = true
__meta__ = {
"_edit_lock_": true
}

[node name="game_border" type="CollisionPolygon2D" parent="field/field_obstacles"]
visible = false
position = Vector2( 559.704, -59.7742 )
scale = Vector2( 48.84, 42.32 )
polygon = PoolVector2Array( -24.9067, 33.3736, -27.8347, 35.4011, 31.7785, 33.2385, 64.6886, -54.7519, 43.7245, -69.3493, -2.88851, -72.0526, -39.4294, -70.0252, -60.5106, -54.3464, -39.8978, 32.833, -28.6545, 35.4011, -37.7897, 27.9672, -58.9881, -53.8057, -38.8438, -68.4032, -3.00563, -70.2955, 43.6074, -67.4571, 63.4003, -54.3464, 30.6073, 32.022 )
__meta__ = {
"_edit_lock_": true
}

[node name="backstop" type="CollisionPolygon2D" parent="field/field_obstacles"]
polygon = PoolVector2Array( 398.337, 696.151, 697.665, 699.405, 1003.5, 507.444, 1221.49, 260.173, 1615.17, -247.383, 1637.95, -227.862, 1241.01, 279.695, 1023.02, 533.473, 697.665, 738.447, 388.576, 738.447, -76.6841, 507.444, -369.505, 68.2126, -610.269, -299.44, -590.748, -315.708, -340.223, 48.6913, -63.6698, 474.909 )
__meta__ = {
"_edit_lock_": true
}

[node name="spray_chart" type="Node2D" parent="field"]
visible = false
__meta__ = {
"_edit_lock_": true
}

[node name="foul_area" type="Area2D" parent="field/spray_chart"]
modulate = Color( 1, 1, 1, 0.4 )
monitorable = false
collision_layer = 8
collision_mask = 16

[node name="foul" type="CollisionPolygon2D" parent="field/spray_chart/foul_area"]
polygon = PoolVector2Array( 485.984, 339.806, -5555.66, -5265.61, -4312.37, 3449.21, 6478.53, 3672.06, 6455.07, -5218.7, 615.875, 352.204 )

[node name="right_field_area" type="Area2D" parent="field/spray_chart"]
visible = false

[node name="right_field" type="CollisionPolygon2D" parent="field/spray_chart/right_field_area"]
build_mode = 1
polygon = PoolVector2Array( 585.275, 355.544, 501.413, -2328.05, 883.452, -2314.07, 1568.33, -2067.14, 2267.18, -1223.86 )

[node name="left_field_area" type="Area2D" parent="field/spray_chart"]
visible = false

[node name="left_field" type="CollisionPolygon2D" parent="field/spray_chart/left_field_area"]
polygon = PoolVector2Array( 515.39, 318.272, 501.413, -2332.71, 179.941, -2328.05, -202.099, -2206.91, -635.387, -1959.99, -910.269, -1661.81, -1157.2, -1200.57, 431.527, 281 )
__meta__ = {
"_edit_lock_": true
}

[node name="center_field_area" type="Area2D" parent="field/spray_chart"]
visible = false

[node name="center_field" type="CollisionPolygon2D" parent="field/spray_chart/center_field_area"]
polygon = PoolVector2Array( 543.344, 313.613, -504.935, -2025.21, 21.5342, -2309.41, 869.475, -2342.03, 1451.85, -2123.05 )
__meta__ = {
"_edit_lock_": true
}

[node name="home_run_area" type="Area2D" parent="field/spray_chart"]
monitorable = false
collision_layer = 10
collision_mask = 16

[node name="home_run" type="CollisionPolygon2D" parent="field/spray_chart/home_run_area"]
polygon = PoolVector2Array( -1169.7, -1304.93, -5708.15, -5476.74, 6466.8, -5289.07, 2291.48, -1335.91, 1943.32, -1856.49, 1308.89, -2278.66, 857.433, -2407.02, 268.766, -2407.02, -195.97, -2300.79, -647.429, -2035.23, -930.697, -1765.24 )

[node name="outfield" type="Area2D" parent="field/spray_chart"]
visible = false
collision_layer = 8

[node name="outfield" type="CollisionPolygon2D" parent="field/spray_chart/outfield"]
polygon = PoolVector2Array( -711.562, -524.042, -399.988, -983.414, -8.52283, -1306.97, 370.958, -1422.81, 806.363, -1410.83, 1249.76, -1207.11, 1533.37, -955.452, 1828.97, -484.096, 2376.22, -1031.35, 2076.63, -1526.67, 1884.89, -1778.33, 1565.33, -2061.94, 1289.7, -2205.74, 826.336, -2333.57, 303.051, -2341.56, 63.3789, -2301.61, -248.195, -2185.77, -647.649, -1958.08, -887.321, -1706.43, -1035.12, -1470.75, -1214.87, -1003.39 )

[node name="infield" type="Area2D" parent="field/spray_chart"]
visible = false
collision_layer = 8

[node name="infield" type="CollisionPolygon2D" parent="field/spray_chart/infield"]
polygon = PoolVector2Array( -567.758, -687.818, -447.922, -923.495, -132.354, -1227.08, 243.133, -1406.83, 670.549, -1430.8, 1066.01, -1322.95, 1469.46, -1047.33, 1705.13, -695.807, 746.445, 194.975, 327.018, 190.981 )

[node name="triggers" type="Node" parent="field"]

[node name="base_1" parent="field/triggers" instance=ExtResource( 11 )]
position = Vector2( 1303.31, -355.563 )

[node name="base_2" parent="field/triggers" instance=ExtResource( 11 )]
position = Vector2( 492.417, -1078.24 )

[node name="base_3" parent="field/triggers" instance=ExtResource( 11 )]
position = Vector2( -263.458, -401.133 )

[node name="home_plate" type="Node2D" parent="field/triggers"]
position = Vector2( 34.8594, -196.853 )
__meta__ = {
"_edit_lock_": true
}

[node name="home_plate" type="Sprite" parent="field/triggers/home_plate"]
position = Vector2( 511.733, 525.13 )
scale = Vector2( 0.5, 0.5 )
texture = ExtResource( 10 )

[node name="ball" type="RigidBody2D" parent="field" groups=[
"ball",
]]
position = Vector2( 544.601, 300.391 )
collision_layer = 17
collision_mask = 9
physics_material_override = SubResource( 3 )
gravity_scale = 0.0
contacts_reported = 4
contact_monitor = true
can_sleep = false
linear_damp = 0.5
angular_damp = 0.5
script = ExtResource( 8 )

[node name="ball_collision" type="CollisionShape2D" parent="field/ball"]
position = Vector2( -0.0768433, 1.38275 )
rotation = -0.785398
scale = Vector2( 1.17967, 1.12307 )
shape = SubResource( 4 )

[node name="ball_shadow" type="Sprite" parent="field/ball"]
modulate = Color( 0, 0, 0, 1 )
self_modulate = Color( 0, 0, 0, 1 )
position = Vector2( 0.277344, 0.883911 )
rotation = 0.523599
scale = Vector2( 0.01, 0.01 )
texture = ExtResource( 9 )

[node name="ball_sprite" type="Sprite" parent="field/ball"]
position = Vector2( -0.0117188, 1.50586 )
rotation = -0.785398
scale = Vector2( 0.01, 0.01 )
texture = ExtResource( 5 )

[node name="trail" parent="field/ball/ball_sprite" instance=ExtResource( 14 )]
visible = false
self_modulate = Color( 0.00784314, 0.584314, 0.678431, 1 )
position = Vector2( -10.2891, -35.3105 )
scale = Vector2( 100, 100 )

[node name="anim" type="AnimationPlayer" parent="field/ball"]
anims/grounder = SubResource( 5 )
anims/hit = SubResource( 6 )
anims/idle = SubResource( 7 )
anims/pop_up = SubResource( 8 )
anims/roll = SubResource( 9 )

[node name="anim_tree" type="AnimationTree" parent="field/ball"]
tree_root = SubResource( 19 )
anim_player = NodePath("../anim")
parameters/playback = SubResource( 20 )
script = ExtResource( 3 )

[node name="ballCamera" type="Camera2D" parent="field/ball"]
position = Vector2( -0.372009, 0.451416 )
scale = Vector2( 2.778, 2.778 )
current = true
zoom = Vector2( 2, 2 )
limit_smoothed = true
drag_margin_h_enabled = true
drag_margin_v_enabled = true
smoothing_enabled = true
smoothing_speed = 3.0
drag_margin_left = 0.55
drag_margin_top = 0.15
drag_margin_right = 0.55
drag_margin_bottom = 0.16
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="ui_canvas" type="CanvasLayer" parent="field"]
layer = 2

[node name="ui" parent="field/ui_canvas" instance=ExtResource( 13 )]
light_mask = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -512.0
margin_top = -300.0
margin_right = 512.0
margin_bottom = 300.0

[node name="defense" type="Node" parent="."]

[node name="fielder_1" parent="defense" groups=[
"fielders",
] instance=ExtResource( 6 )]
position = Vector2( 543.821, -403.176 )
collision_layer = 32

[node name="fielder_2" parent="defense" groups=[
"fielders",
] instance=ExtResource( 6 )]
position = Vector2( 542.526, 442.922 )
collision_layer = 32

[node name="fielder_3" parent="defense" groups=[
"fielders",
"infield",
] instance=ExtResource( 6 )]
position = Vector2( 1298.25, -569.172 )
collision_layer = 32

[node name="fielder_4" parent="defense" groups=[
"fielders",
"infield",
] instance=ExtResource( 6 )]
position = Vector2( 769.237, -1085.4 )
collision_layer = 32

[node name="fielder_5" parent="defense" groups=[
"fielders",
"infield",
] instance=ExtResource( 6 )]
position = Vector2( -154.779, -665.879 )
collision_layer = 32

[node name="fielder_6" parent="defense" groups=[
"fielders",
"infield",
] instance=ExtResource( 6 )]
position = Vector2( 127.17, -937.098 )
collision_layer = 32

[node name="fielder_7" parent="defense" groups=[
"fielders",
"outfield",
] instance=ExtResource( 6 )]
position = Vector2( -809.342, -1321.77 )
collision_layer = 32

[node name="fielder_8" parent="defense" groups=[
"fielders",
"outfield",
] instance=ExtResource( 6 )]
position = Vector2( 504.472, -2019.03 )
collision_layer = 32

[node name="fielder_9" parent="defense" groups=[
"fielders",
"outfield",
] instance=ExtResource( 6 )]
position = Vector2( 1885.85, -1369.98 )
collision_layer = 32

[node name="offense" type="Node" parent="."]

[node name="basepath" type="Path2D" parent="offense"]
position = Vector2( 0, 7.53674 )
curve = SubResource( 21 )

[node name="runners_path" type="PathFollow2D" parent="offense/basepath"]
position = Vector2( 551.347, 310.612 )
rotation = -1.32176
rotate = false
loop = false

[node name="baserunner" type="Sprite" parent="offense/basepath/runners_path"]
position = Vector2( 34.0833, -18.2257 )
rotation = 0.524373
scale = Vector2( 0.15, 0.15 )
texture = ExtResource( 12 )
[connection signal="body_entered" from="field/spray_chart/foul_area" to="field/ball" method="_on_foul_area_body_entered"]
[connection signal="body_entered" from="field/spray_chart/home_run_area" to="field/ball" method="_on_home_run_area_body_entered"]
