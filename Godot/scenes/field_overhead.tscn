[gd_scene load_steps=28 format=2]

[ext_resource path="res://scripts/field_overhead.gd" type="Script" id=1]
[ext_resource path="res://assets/views/overhead-view.png" type="Texture" id=2]
[ext_resource path="res://scripts/anim_tree.gd" type="Script" id=3]
[ext_resource path="res://assets/sound/hit.wav" type="AudioStream" id=4]
[ext_resource path="res://assets/raw/baseball.png" type="Texture" id=5]
[ext_resource path="res://scenes/actors/fielder.tscn" type="PackedScene" id=6]
[ext_resource path="res://assets/raw/stadiums/kob_field.jpg" type="Texture" id=7]
[ext_resource path="res://scenes/ball.gd" type="Script" id=8]
[ext_resource path="res://assets/raw/ball_shadow.png" type="Texture" id=9]

[sub_resource type="CanvasItemMaterial" id=1]
blend_mode = 1

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 1603.15, 1081.14 )

[sub_resource type="PhysicsMaterial" id=3]
friction = 2.0
bounce = 0.005

[sub_resource type="PhysicsMaterial" id=4]

[sub_resource type="CircleShape2D" id=5]
radius = 8.77666

[sub_resource type="Animation" id=6]
length = 3.0
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.5, 3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ -45.0, 90.0, 270.0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("ball_sprite:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.5, 1, 3 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.03, 0.03 ), Vector2( 0.03, 0.03 ), Vector2( 0.01, 0.01 ), Vector2( 0.01, 0.01 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("ball_shadow:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.5, 1, 3 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.07, 0.07 ), Vector2( 0.01, 0.01 ), Vector2( 0.01, 0.01 ) ]
}

[sub_resource type="Animation" id=7]
length = 3.0
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.5, 3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ -45.0, 90.0, 270.0 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("ball_sprite:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1.5, 3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.0765674, 0.0765674 ), Vector2( 0.01, 0.01 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("ball_shadow:scale")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 1.5, 3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.5, 0.5 ), Vector2( 0.01, 0.01 ) ]
}

[sub_resource type="Animation" id=8]
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ -63.1945, -63.1945 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("ball_sprite:scale")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 0.01, 0.01 ), Vector2( 0.01, 0.01 ) ]
}

[sub_resource type="Animation" id=9]
length = 5.0
tracks/0/type = "value"
tracks/0/path = NodePath("ball_sprite:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1.5, 3, 5 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 0,
"values": [ 0.0, -307.239, -130.346, -34.4153 ]
}

[sub_resource type="AnimationNodeAnimation" id=10]
animation = "grounder"

[sub_resource type="AnimationNodeAnimation" id=11]
animation = "hit"

[sub_resource type="AnimationNodeAnimation" id=12]
animation = "idle"

[sub_resource type="AnimationNodeAnimation" id=13]
animation = "roll"

[sub_resource type="AnimationNodeStateMachineTransition" id=14]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=15]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachineTransition" id=16]
switch_mode = 2
auto_advance = true

[sub_resource type="AnimationNodeStateMachine" id=17]
states/grounder/node = SubResource( 10 )
states/grounder/position = Vector2( 156, 72 )
states/hit/node = SubResource( 11 )
states/hit/position = Vector2( 186, 188 )
states/idle/node = SubResource( 12 )
states/idle/position = Vector2( 634, 188 )
states/roll/node = SubResource( 13 )
states/roll/position = Vector2( 408, 72 )
transitions = [ "hit", "roll", SubResource( 14 ), "roll", "idle", SubResource( 15 ), "grounder", "roll", SubResource( 16 ) ]
graph_offset = Vector2( -143, -88 )

[sub_resource type="AnimationNodeStateMachinePlayback" id=18]

[node name="OverheadView" type="Node2D"]
script = ExtResource( 1 )

[node name="scene_bg" type="Sprite" parent="."]
material = SubResource( 1 )
position = Vector2( 493.818, -104.114 )
scale = Vector2( 1.71096, 1.71096 )
texture = ExtResource( 7 )

[node name="field_bg" type="Sprite" parent="."]
position = Vector2( 460, -99.9999 )
scale = Vector2( 1.44397, 1.49537 )
texture = ExtResource( 2 )

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 4 )
autoplay = true

[node name="field" type="Node" parent="."]

[node name="physics" type="Node" parent="field"]

[node name="infield_dirt" type="Area2D" parent="field/physics"]
visible = false
position = Vector2( 58.8665, 130.347 )
input_pickable = false
space_override = 1
gravity = 0.0
linear_damp = 100.0
__meta__ = {
"_edit_lock_": true
}

[node name="dirt" type="CollisionShape2D" parent="field/physics/infield_dirt"]
position = Vector2( 436.475, -205.977 )
shape = SubResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="field_obstacles" type="StaticBody2D" parent="field"]
physics_material_override = SubResource( 3 )

[node name="outfield_fence" type="CollisionPolygon2D" parent="field/field_obstacles"]
position = Vector2( -383.876, -284.596 )
rotation = 0.409826
scale = Vector2( 1, 2.5 )
polygon = PoolVector2Array( -10.525, 9.80404, -18.7351, -69.9095, 14.4019, -134.57, 71.7714, -197.778, 246.291, -288.705, 393.024, -337.424, 743.732, -397.8, 906.281, -408.489, 1119.98, -405.977, 1371.72, -374.961, 1489.19, -348.932, 1589.31, -319.322, 1681.15, -284.307, 1668.61, -277.597, 1567.56, -313.276, 1473.75, -342.285, 1353.9, -367.9, 1126.76, -395.827, 912.022, -399.292, 750.146, -389.286, 550.457, -361.949, 403.012, -329.531, 260.37, -280.957, 92.9969, -191.271, 31.1753, -129.555, 2.54901, -72.4752, 10.9688, 9.91605 )
__meta__ = {
"_edit_lock_": true
}

[node name="game_border" type="CollisionPolygon2D" parent="field/field_obstacles"]
position = Vector2( 559.704, -59.7742 )
scale = Vector2( 48.84, 42.32 )
polygon = PoolVector2Array( -23.4238, 19.0785, -23.4238, 20.432, 21.4941, 19.9244, 21.4918, -6.30603, 14.8302, -19.9137, -1.75731, -28.8318, -17.5454, -19.9906, -23.6075, -6.69043, -23.4238, 18.9093, -22.984, 18.9432, -22.8747, -6.84419, -17.0605, -19.5293, -1.80536, -28.063, 14.4491, -19.0681, 20.8442, -5.92163, 20.9077, 18.774 )
__meta__ = {
"_edit_lock_": true
}

[node name="red_dugout" type="CollisionPolygon2D" parent="field/field_obstacles"]
position = Vector2( -79.7784, 277.008 )
polygon = PoolVector2Array( 9.8631, -52.9938, 163.821, 97.4654, 111.336, 155.783, -44.9554, 6.49008 )
__meta__ = {
"_edit_lock_": true
}

[node name="blue_dugout" type="CollisionPolygon2D" parent="field/field_obstacles"]
position = Vector2( 983.933, 291.004 )
polygon = PoolVector2Array( 98.5056, -52.9938, 153.324, 5.32373, 0.532227, 156.949, -54.2861, 95.1327 )
__meta__ = {
"_edit_lock_": true
}

[node name="ball" type="RigidBody2D" parent="field"]
position = Vector2( -25, -9 )
physics_material_override = SubResource( 4 )
gravity_scale = 0.0
angular_damp = 60.0
applied_force = Vector2( 10, -200 )
applied_torque = 1.0
script = ExtResource( 8 )

[node name="ball_collision" type="CollisionShape2D" parent="field/ball"]
visible = false
position = Vector2( 540, 520 )
rotation = -0.785398
scale = Vector2( 1.17967, 1.12307 )
shape = SubResource( 5 )
__meta__ = {
"_edit_lock_": true
}

[node name="ball_shadow" type="Sprite" parent="field/ball"]
modulate = Color( 0, 0, 0, 1 )
self_modulate = Color( 0, 0, 0, 1 )
position = Vector2( 540.922, 520.922 )
rotation = 0.523599
scale = Vector2( 0.01, 0.01 )
texture = ExtResource( 9 )
__meta__ = {
"_edit_lock_": true
}

[node name="ball_sprite" type="Sprite" parent="field/ball"]
position = Vector2( 540, 520 )
rotation = -0.785398
scale = Vector2( 0.03, 0.03 )
texture = ExtResource( 5 )

[node name="ballCamera" type="Camera2D" parent="field/ball/ball_sprite"]
rotation = 0.785398
scale = Vector2( 277.778, 277.778 )
current = true
limit_smoothed = true
smoothing_enabled = true
smoothing_speed = 3.0
editor_draw_limits = true

[node name="anim" type="AnimationPlayer" parent="field/ball"]
anims/grounder = SubResource( 6 )
anims/hit = SubResource( 7 )
anims/idle = SubResource( 8 )
anims/roll = SubResource( 9 )

[node name="anim_tree" type="AnimationTree" parent="field/ball"]
tree_root = SubResource( 17 )
anim_player = NodePath("../anim")
parameters/playback = SubResource( 18 )
script = ExtResource( 3 )

[node name="spray_chart" type="Area2D" parent="field"]
visible = false
modulate = Color( 1, 1, 1, 0.4 )
collision_layer = 32

[node name="foul" type="CollisionPolygon2D" parent="field/spray_chart"]
polygon = PoolVector2Array( 494.538, 542.705, -1032.36, -899.037, -1164.49, 862.766, 2033.18, 868.638, 1986.2, -849.119, 547.392, 530.959 )
__meta__ = {
"_edit_lock_": true
}

[node name="right_field" type="CollisionPolygon2D" parent="field/spray_chart"]
build_mode = 1
polygon = PoolVector2Array( 525.555, 483.584, 519.682, -890.623, 698.799, -875.942, 845.616, -834.833, 1045.29, -740.87, 1218.53, -594.053, 1341.86, -429.618, 1400.58, -300.419 )
__meta__ = {
"_edit_lock_": true
}

[node name="left_field" type="CollisionPolygon2D" parent="field/spray_chart"]
polygon = PoolVector2Array( 506.12, 473.556, 499.613, -892.94, 310.906, -873.419, 131.961, -827.869, -108.803, -684.712, -222.678, -574.091, -313.777, -447.202, -369.088, -294.285, 454.063, 486.57 )
__meta__ = {
"_edit_lock_": true
}

[node name="center_field" type="CollisionPolygon2D" parent="field/spray_chart"]
polygon = PoolVector2Array( 502.867, 499.585, 1.81812, -743.276, 135.214, -824.615, 310.906, -876.672, 424.781, -892.94, 688.32, -879.926, 844.491, -837.63, 1029.94, -753.037, 1140.56, -665.191 )
__meta__ = {
"_edit_lock_": true
}

[node name="home_run" type="CollisionPolygon2D" parent="field/spray_chart"]
polygon = PoolVector2Array( -372.341, -284.524, -1084.87, -958.011, 2123.14, -977.533, 1423.62, -313.806, 1221.9, -600.119, 1003.92, -772.558, 685.066, -889.687, 402.006, -896.194, 304.4, -886.433, 131.961, -827.869, -108.803, -687.966, -229.185, -570.837, -310.524, -453.709 )
__meta__ = {
"_edit_lock_": true
}

[node name="defense" type="Node" parent="."]

[node name="fielder_1" parent="defense" instance=ExtResource( 6 )]
position = Vector2( 496.207, 90.5056 )

[node name="fielder_2" parent="defense" instance=ExtResource( 6 )]
position = Vector2( 500.991, 638.197 )

[node name="fielder_3" parent="defense" instance=ExtResource( 6 )]
position = Vector2( 130.283, 21.1473 )

[node name="fielder_4" parent="defense" instance=ExtResource( 6 )]
position = Vector2( 627.749, -232.369 )

[node name="fielder_5" parent="defense" instance=ExtResource( 6 )]
position = Vector2( 840.607, 2.01404 )

[node name="fielder_6" parent="defense" instance=ExtResource( 6 )]
position = Vector2( 266.608, -155.836 )

[node name="fielder_7" parent="defense" instance=ExtResource( 6 )]
position = Vector2( -73.0088, -390.219 )

[node name="fielder_8" parent="defense" instance=ExtResource( 6 )]
position = Vector2( 477.074, -686.785 )

[node name="fielder_9" parent="defense" instance=ExtResource( 6 )]
position = Vector2( 1132.39, -421.311 )
